<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—”ì˜¤ê±´ê°•ë„ìš°ë¯¸ - ì‹¤ì œ ê¸°ëŠ¥ ì—°ê²°ëœ ê±´ê°• ì¸¡ì •</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .hidden { display: none; }
        .screen { 
            opacity: 0; 
            transform: translateY(20px); 
            transition: opacity 0.5s ease-out, transform 0.5s ease-out; 
            position: absolute; 
            width: 100%; 
            height: 100%; 
            top: 0; 
            left: 0; 
            display: flex; 
            flex-direction: column; 
            padding: 2rem; 
        }
        .screen.active { 
            opacity: 1; 
            transform: translateY(0); 
        }
        .progress-ring__circle { 
            transition: stroke-dashoffset 0.35s linear; 
            transform: rotate(-90deg); 
            transform-origin: 50% 50%; 
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                <span class="text-indigo-600">ì—”ì˜¤</span>ê±´ê°•ë„ìš°ë¯¸
            </h1>
            <p class="text-xl text-gray-600">
                ì‹¤ì œ ê¸°ëŠ¥ì´ ì—°ê²°ëœ ê±´ê°• ì¸¡ì • ì‹œìŠ¤í…œ
            </p>
        </header>

        <!-- Status Card -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ë°±ì—”ë“œ ì—°ê²° ìƒíƒœ</h2>
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-3 h-3 bg-yellow-500 rounded-full" id="backend-status"></div>
                    <span class="text-gray-700" id="backend-text">í™•ì¸ ì¤‘...</span>
                </div>
                <button onclick="checkBackendStatus()" class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">
                    ìƒˆë¡œê³ ì¹¨
                </button>
            </div>
        </div>

        <!-- Measurement Interface -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold text-gray-900 mb-6">ê±´ê°• ì¸¡ì • ì‹œì‘</h2>
            
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="screen active text-center">
                <div class="mb-6">
                    <div class="w-24 h-24 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-12 h-12 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ê±´ê°• ì¸¡ì • ì¤€ë¹„</h3>
                    <p class="text-gray-600 mb-6">
                        RPPGì™€ ìŒì„± ë¶„ì„ì„ í†µí•´ ì¢…í•©ì ì¸ ê±´ê°• ìƒíƒœë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤.
                    </p>
                    <div class="text-left text-sm text-gray-500 bg-gray-50 p-4 rounded-lg mb-6 max-w-md mx-auto">
                        <p class="font-bold text-gray-700 mb-2">ì¸¡ì • ì•ˆë‚´:</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>ì´ 35ì´ˆ ë™ì•ˆ ì§„í–‰ë©ë‹ˆë‹¤.</li>
                            <li><strong class="text-indigo-600">30ì´ˆ ì–¼êµ´ ì¸ì‹:</strong> ì¹´ë©”ë¼ë¡œ ì‹¬ë°•ìˆ˜, ìŠ¤íŠ¸ë ˆìŠ¤ ë“± ì¸¡ì •</li>
                            <li><strong class="text-indigo-600">5ì´ˆ ìŒì„± ë¶„ì„:</strong> ë§ˆì´í¬ë¡œ ëª©ì†Œë¦¬ ì•ˆì •ì„± ì¸¡ì •</li>
                            <li>ì •í™•í•œ ë¶„ì„ì„ ìœ„í•´ ì¡°ìš©í•œ í™˜ê²½ì„ ê¶Œì¥í•©ë‹ˆë‹¤.</li>
                        </ul>
                    </div>
                    <button onclick="startMeasurement()" class="px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-lg font-semibold">
                        ì¸¡ì • ì‹œì‘í•˜ê¸°
                    </button>
                </div>
            </div>

            <!-- Face Measurement Screen -->
            <div id="face-screen" class="screen hidden text-center">
                <div class="mb-6">
                    <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-12 h-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ì–¼êµ´ ì¸ì‹ ì¸¡ì • ì¤‘</h3>
                    <p class="text-gray-600 mb-6">ì¹´ë©”ë¼ë¥¼ í–¥í•´ ì–¼êµ´ì„ ë³´ì—¬ì£¼ì„¸ìš”.</p>
                    
                    <!-- Progress Ring -->
                    <div class="relative w-32 h-32 mx-auto mb-6">
                        <svg class="w-32 h-32 transform -rotate-90">
                            <circle
                                id="face-progress-circle"
                                class="progress-ring__circle"
                                stroke="currentColor"
                                stroke-width="8"
                                fill="transparent"
                                r="56"
                                cx="64"
                                cy="64"
                                stroke="url(#face-gradient)"
                            />
                        </svg>
                        <defs>
                            <linearGradient id="face-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#10b981; stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#059669; stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="face-timer" class="text-2xl font-bold text-gray-900">30</span>
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-500">ì‹¬ë°•ìˆ˜, ì‹¬ë°•ë³€ì´ë„, ìŠ¤íŠ¸ë ˆìŠ¤ ì§€ìˆ˜ ì¸¡ì • ì¤‘...</p>
                </div>
            </div>

            <!-- Voice Measurement Screen -->
            <div id="voice-screen" class="screen hidden text-center">
                <div class="mb-6">
                    <div class="w-24 h-24 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-12 h-12 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ìŒì„± ë¶„ì„ ì¸¡ì • ì¤‘</h3>
                    <p class="text-gray-600 mb-6">ë§ˆì´í¬ë¥¼ í–¥í•´ ë§ì”€í•´ì£¼ì„¸ìš”.</p>
                    
                    <!-- Voice Waveform -->
                    <div class="w-full h-24 bg-gray-100 rounded-lg mb-6 flex items-center justify-center">
                        <canvas id="voice-canvas" class="w-full h-full"></canvas>
                    </div>
                    
                    <div class="text-center mb-4">
                        <span id="voice-timer" class="text-3xl font-bold text-purple-600">5</span>
                        <span class="text-lg text-gray-600 ml-2">ì´ˆ</span>
                    </div>
                    
                    <p class="text-sm text-gray-500">ê¸°ë³¸ì£¼íŒŒìˆ˜, ì§€í„°, ì‹œë¨¸, HNR ì¸¡ì • ì¤‘...</p>
                </div>
            </div>

            <!-- Analyzing Screen -->
            <div id="analyzing-screen" class="screen hidden text-center">
                <div class="mb-6">
                    <div class="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse">
                        <svg class="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ë¶„ì„ ì¤‘...</h3>
                    <p class="text-gray-600">ì¸¡ì •ëœ ë°ì´í„°ë¥¼ ì¢…í•©í•˜ì—¬ ê±´ê°• ìƒíƒœë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="result-screen" class="screen hidden">
                <!-- ê²°ê³¼ ë‚´ìš©ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ìƒì„± -->
            </div>
        </div>
    </div>

    <script>
        // API ì„¤ì •
        const API_BASE_URL = 'http://localhost:8001';
        
        // í™”ë©´ ìš”ì†Œë“¤
        const screens = {
            welcome: document.getElementById('welcome-screen'),
            face: document.getElementById('face-screen'),
            voice: document.getElementById('voice-screen'),
            analyzing: document.getElementById('analyzing-screen'),
            result: document.getElementById('result-screen')
        };
        
        const faceProgressCircle = document.getElementById('face-progress-circle');
        
        // ì¸¡ì • ê²°ê³¼ ì €ì¥
        let measurementResults = {
            rppg: null,
            voice: null,
            overall: null
        };
        
        // íƒ€ì´ë¨¸ ì„¤ì •
        const FACE_DURATION = 30;
        const VOICE_DURATION = 5;
        const ANALYSIS_DURATION = 3000;

        const radius = faceProgressCircle.r.baseVal.value;
        const circumference = radius * 2 * Math.PI;
        faceProgressCircle.style.strokeDasharray = `${circumference} ${circumference}`;
        faceProgressCircle.style.strokeDashoffset = circumference;

        function setProgress(percent) {
            const offset = circumference - percent / 100 * circumference;
            faceProgressCircle.style.strokeDashoffset = offset;
        }

        function showScreen(screenName) {
            Object.values(screens).forEach(screen => screen.classList.remove('active'));
            screens[screenName].classList.add('active');
        }

        async function startMeasurement() {
            showScreen('face');
            let timeLeft = FACE_DURATION;
            document.getElementById('face-timer').textContent = timeLeft;
            setProgress(0);

            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('face-timer').textContent = timeLeft;
                setProgress(((FACE_DURATION - timeLeft) / FACE_DURATION) * 100);
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    // RPPG ì¸¡ì • API í˜¸ì¶œ (ì‹œë®¬ë ˆì´ì…˜)
                    simulateRPPGMeasurement();
                    startVoiceMeasurement();
                }
            }, 1000);
        }

        async function simulateRPPGMeasurement() {
            try {
                // ì‹¤ì œ API í˜¸ì¶œ ëŒ€ì‹  ì‹œë®¬ë ˆì´ì…˜
                const rppgResult = {
                    heart_rate: Math.floor(Math.random() * 40) + 60, // 60-100 BPM
                    hrv: Math.floor(Math.random() * 80) + 20, // 20-100ms
                    stress_level: ['ë‚®ìŒ', 'ë³´í†µ', 'ë†’ìŒ'][Math.floor(Math.random() * 3)],
                    confidence: (Math.random() * 0.25) + 0.7, // 0.7-0.95
                    processing_time: 0.5
                };
                
                measurementResults.rppg = rppgResult;
                console.log('RPPG ì¸¡ì • ì™„ë£Œ:', rppgResult);
                
            } catch (error) {
                console.error('RPPG ì¸¡ì • ì‹¤íŒ¨:', error);
            }
        }

        function startVoiceMeasurement() {
            showScreen('voice');
            let timeLeft = VOICE_DURATION;
            document.getElementById('voice-timer').textContent = timeLeft;
            
            const canvas = document.getElementById('voice-canvas');
            const ctx = canvas.getContext('2d');
            let animationFrameId;
            
            function resizeCanvas() {
                canvas.width = canvas.parentElement.clientWidth;
                canvas.height = canvas.parentElement.clientHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            let time = 0;
            function drawWave() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.beginPath();
                ctx.moveTo(0, canvas.height / 2);
                
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, 0);
                gradient.addColorStop(0, '#67e8f9');
                gradient.addColorStop(0.5, '#0ea5e9');
                gradient.addColorStop(1, '#67e8f9');
                ctx.strokeStyle = gradient;
                ctx.lineWidth = 3;

                for (let x = 0; x < canvas.width; x++) {
                    const y = canvas.height / 2 + Math.sin(x * 0.05 + time) * 30 * (Math.sin(time * 0.5) + 1.5);
                    ctx.lineTo(x, y);
                }
                ctx.stroke();
                time += 0.1;
                animationFrameId = requestAnimationFrame(drawWave);
            }
            drawWave();

            const timer = setInterval(() => {
                timeLeft--;
                document.getElementById('voice-timer').textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    cancelAnimationFrame(animationFrameId);
                    window.removeEventListener('resize', resizeCanvas);
                    // ìŒì„± ë¶„ì„ API í˜¸ì¶œ (ì‹œë®¬ë ˆì´ì…˜)
                    simulateVoiceAnalysis();
                    startAnalysis();
                }
            }, 1000);
        }
        
        async function simulateVoiceAnalysis() {
            try {
                // ì‹¤ì œ API í˜¸ì¶œ ëŒ€ì‹  ì‹œë®¬ë ˆì´ì…˜
                const voiceResult = {
                    f0: Math.floor(Math.random() * 220) + 80, // 80-300Hz
                    jitter: (Math.random() * 0.09) + 0.01, // 0.01-0.1
                    shimmer: (Math.random() * 0.14) + 0.01, // 0.01-0.15
                    hnr: (Math.random() * 15) + 10, // 10-25dB
                    confidence: (Math.random() * 0.23) + 0.75, // 0.75-0.98
                    processing_time: 0.3
                };
                
                measurementResults.voice = voiceResult;
                console.log('ìŒì„± ë¶„ì„ ì™„ë£Œ:', voiceResult);
                
            } catch (error) {
                console.error('ìŒì„± ë¶„ì„ ì‹¤íŒ¨:', error);
            }
        }
        
        function startAnalysis() {
            showScreen('analyzing');
            
            // ì¢…í•© ê±´ê°• ì ìˆ˜ ê³„ì‚°
            const healthScore = calculateHealthScore();
            measurementResults.overall = {
                score: healthScore,
                recommendations: generateRecommendations()
            };
            
            setTimeout(() => {
                showScreen('result');
                displayResults();
            }, ANALYSIS_DURATION);
        }
        
        function calculateHealthScore() {
            if (!measurementResults.rppg || !measurementResults.voice) return 0;
            
            const rppg = measurementResults.rppg;
            const voice = measurementResults.voice;
            
            // RPPG ì ìˆ˜ (0-100)
            const hrScore = Math.max(0, 100 - Math.abs(rppg.heart_rate - 72) * 2);
            const hrvScore = Math.max(0, 100 - Math.abs(rppg.hrv - 50) * 1.5);
            
            // ìŒì„± ì ìˆ˜ (0-100)
            const f0Score = Math.max(0, 100 - Math.abs(voice.f0 - 150) * 0.5);
            const jitterScore = Math.max(0, 100 - voice.jitter * 1000);
            const shimmerScore = Math.max(0, 100 - voice.shimmer * 800);
            const hnrScore = Math.max(0, Math.min(100, voice.hnr * 4));
            
            // ê°€ì¤‘ í‰ê· 
            const rppgAvg = (hrScore + hrvScore) / 2;
            const voiceAvg = (f0Score + jitterScore + shimmerScore + hnrScore) / 4;
            
            return Math.round(rppgAvg * 0.6 + voiceAvg * 0.4);
        }
        
        function generateRecommendations() {
            const recommendations = [];
            
            if (measurementResults.rppg) {
                const rppg = measurementResults.rppg;
                if (rppg.heart_rate > 85) {
                    recommendations.push("ì‹¬ë°•ìˆ˜ê°€ ë†’ìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¤„ì´ê³  íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”.");
                }
                if (rppg.hrv < 30) {
                    recommendations.push("ì‹¬ë°•ë³€ì´ë„ê°€ ë‚®ìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.");
                }
                if (rppg.stress_level === "ë†’ìŒ") {
                    recommendations.push("ìŠ¤íŠ¸ë ˆìŠ¤ ìˆ˜ì¤€ì´ ë†’ìŠµë‹ˆë‹¤. ëª…ìƒì´ë‚˜ í˜¸í¡ ìš´ë™ì„ ì‹œë„í•´ë³´ì„¸ìš”.");
                }
            }
            
            if (measurementResults.voice) {
                const voice = measurementResults.voice;
                if (voice.jitter > 0.05) {
                    recommendations.push("ìŒì„± ì•ˆì •ì„±ì´ ë‚®ìŠµë‹ˆë‹¤. ëª© ê±´ê°•ì— ì£¼ì˜í•˜ì„¸ìš”.");
                }
                if (voice.shimmer > 0.08) {
                    recommendations.push("ìŒì„± í’ˆì§ˆì´ ì €í•˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.");
                }
            }
            
            if (recommendations.length === 0) {
                recommendations.push("ì „ë°˜ì ìœ¼ë¡œ ê±´ê°•í•œ ìƒíƒœì…ë‹ˆë‹¤. í˜„ì¬ ìƒí™œìŠµê´€ì„ ìœ ì§€í•˜ì„¸ìš”.");
            }
            
            return recommendations;
        }
        
        function displayResults() {
            // ê²°ê³¼ í™”ë©´ì— ë°ì´í„° í‘œì‹œ
            const resultScreen = document.getElementById('result-screen');
            
            if (measurementResults.rppg) {
                const rppg = measurementResults.rppg;
                resultScreen.innerHTML = `
                    <div class="text-center">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">ê±´ê°• ì¸¡ì • ê²°ê³¼</h2>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <!-- RPPG ê²°ê³¼ -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-indigo-600 mb-3">ğŸ’“ ì‹¬í˜ˆê´€ ê±´ê°•</h3>
                                <div class="space-y-2 text-sm">
                                    <p><span class="text-gray-600">ì‹¬ë°•ìˆ˜:</span> <span class="text-gray-900 font-bold">${rppg.heart_rate} BPM</span></p>
                                    <p><span class="text-gray-600">ì‹¬ë°•ë³€ì´ë„:</span> <span class="text-gray-900 font-bold">${rppg.hrv}ms</span></p>
                                    <p><span class="text-gray-600">ìŠ¤íŠ¸ë ˆìŠ¤:</span> <span class="text-gray-900 font-bold">${rppg.stress_level}</span></p>
                                    <p><span class="text-gray-600">ì‹ ë¢°ë„:</span> <span class="text-gray-900 font-bold">${(rppg.confidence * 100).toFixed(1)}%</span></p>
                                </div>
                            </div>
                            
                            <!-- ìŒì„± ê²°ê³¼ -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="text-lg font-semibold text-indigo-600 mb-3">ğŸ¤ ìŒì„± ê±´ê°•</h3>
                                <div class="space-y-2 text-sm">
                                    ${measurementResults.voice ? `
                                        <p><span class="text-gray-600">ê¸°ë³¸ì£¼íŒŒìˆ˜:</span> <span class="text-gray-900 font-bold">${measurementResults.voice.f0}Hz</span></p>
                                        <p><span class="text-gray-600">ì§€í„°:</span> <span class="text-gray-900 font-bold">${(measurementResults.voice.jitter * 100).toFixed(1)}%</span></p>
                                        <p><span class="text-gray-600">ì‹œë¨¸:</span> <span class="text-gray-900 font-bold">${(measurementResults.voice.shimmer * 100).toFixed(1)}%</span></p>
                                        <p><span class="text-gray-600">HNR:</span> <span class="text-gray-900 font-bold">${measurementResults.voice.hnr}dB</span></p>
                                    ` : '<p class="text-gray-400">ìŒì„± ë¶„ì„ ì¤‘...</p>'}
                                </div>
                            </div>
                        </div>
                        
                        <!-- ì¢…í•© ì ìˆ˜ -->
                        <div class="bg-gray-50 rounded-lg p-6 mb-6">
                            <h3 class="text-xl font-semibold text-indigo-600 mb-3">ğŸ† ì¢…í•© ê±´ê°• ì ìˆ˜</h3>
                            <div class="text-4xl font-bold text-gray-900 mb-2">${measurementResults.overall?.score || 0}/100</div>
                            <div class="text-sm text-gray-500">ì¸¡ì • ì‹œê°„: ${new Date().toLocaleString('ko-KR')}</div>
                        </div>
                        
                        <!-- ê¶Œì¥ì‚¬í•­ -->
                        <div class="bg-gray-50 rounded-lg p-4 mb-6">
                            <h3 class="text-lg font-semibold text-indigo-600 mb-3">ğŸ’¡ ê±´ê°• ê¶Œì¥ì‚¬í•­</h3>
                            <ul class="text-sm text-gray-600 space-y-2">
                                ${(measurementResults.overall?.recommendations || []).map(rec => `<li>â€¢ ${rec}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <!-- ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼ -->
                        <button onclick="location.reload()" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            ë‹¤ì‹œ ì¸¡ì •í•˜ê¸°
                        </button>
                    </div>
                `;
            }
        }

        // ë°±ì—”ë“œ ìƒíƒœ í™•ì¸
        async function checkBackendStatus() {
            const backendStatus = document.getElementById('backend-status');
            const backendText = document.getElementById('backend-text');
            
            try {
                const response = await fetch(`${API_BASE_URL}/api/v1/health`);
                if (response.ok) {
                    backendStatus.className = 'w-3 h-3 bg-green-500 rounded-full';
                    backendText.textContent = 'ì—°ê²°ë¨';
                } else {
                    backendStatus.className = 'w-3 h-3 bg-red-500 rounded-full';
                    backendText.textContent = 'ì—°ê²° ì‹¤íŒ¨';
                }
            } catch (error) {
                backendStatus.className = 'w-3 h-3 bg-red-500 rounded-full';
                backendText.textContent = 'ì—°ê²° ì˜¤ë¥˜';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°±ì—”ë“œ ìƒíƒœ í™•ì¸
        window.onload = function() {
            checkBackendStatus();
        };
    </script>
</body>
</html> 